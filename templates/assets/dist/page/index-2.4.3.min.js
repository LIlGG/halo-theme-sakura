import{d as c,_ as p,s as a}from"../main-2.4.3.min.js";import"../assets/_commonjsHelpers-042e6b4d.js";var g=Object.defineProperty,v=Object.getOwnPropertyDescriptor,u=(i,e,t,s)=>{for(var n=s>1?void 0:s?v(e,t):e,l=i.length-1,o;l>=0;l--)(o=i[l])&&(n=(s?o(e,t,n):o(n))||n);return s&&n&&g(e,t,n),n};class m{registerArrowDown(){const e=document.querySelector(".headertop-down");e&&p(()=>Promise.resolve({}),["css/font-awesome-animation.min-2.4.3.min.css"]),e==null||e.addEventListener("click",()=>{var s;const t=((s=document.querySelector(".site-content"))==null?void 0:s.getBoundingClientRect().top)||0;window.scrollTo({top:t+ +window.pageYOffset,behavior:"smooth"})})}registerBackgroundChangeEvent(){const e=document.querySelector(".bg-change-js");if(!e)return;const t=document.getElementById("bg-next"),s=document.getElementById("bg-prev"),n=(a.getThemeConfig("random_image","rimage_cover_back_num",Number)||0).valueOf();t==null||t.addEventListener("click",()=>{let o=Number(e.getAttribute("data-currIndex"));n===0?o=Math.ceil(Math.random()*99):o=(o+1)%n,l(o)}),s==null||s.addEventListener("click",()=>{let o=Number(e.getAttribute("data-currIndex"));n===0?o=Math.ceil(Math.random()*99):o=(o-1+n)%n,l(o)});const l=o=>{const r=e.getAttribute("data-url");e.src=`${r}&t=${o}`,e.setAttribute("data-currIndex",`${o}`)}}registerBackgroundVideo(){const e=document.querySelector(".video-container");if(!e)return;e.insertAdjacentElement("afterbegin",document.createElement("video"));const t=e.querySelector(".video-status"),s=document.querySelector(".focusinfo"),n=document.querySelector(".home-wave"),l=e.querySelector(".video-play"),o=e.querySelector(".video-pause");let r;l==null||l.addEventListener("click",async()=>{t.innerHTML=a.translate("home.video.loading","正在载入视频 ..."),t.style.bottom="0",p(()=>import("../assets/video.es-db0fa9e7.js"),["assets/video.es-db0fa9e7.js","assets/_commonjsHelpers-042e6b4d.js"]).then(d=>{var y;if(r){r.play();return}r=d.default(e.querySelector("video"),{controls:!1,controlsBar:!1,children:["MediaLoader"],autoplay:!1,preload:"auto",muted:!1,loop:!1,sources:[{src:(y=a.getThemeConfig("mainScreen","bgvideo_url",String))==null?void 0:y.toString()}]}),r.on("loadeddata",()=>{t.style.bottom="-100px",n.style.bottom="-100px",s.style.top="-999px",l.style.display="none",o.style.display="block",r.play()}),r.on("play",()=>{t.style.bottom="-100px",n.style.bottom="-100px",s.style.top="-999px",l.style.display="none",o.style.display="block"}),r.on("pause",()=>{t.innerHTML=a.translate("home.video.statu_pause","已暂停 ..."),t.style.bottom="0",n.style.bottom="0",s.style.top="0",l.style.display="block",o.style.display="none"}),r.on("waiting",()=>{t.innerHTML=a.translate("home.video.statu_waiting","加载中 ..."),t.style.bottom="0"}),r.on("canplay",()=>{t.style.bottom="-100px"}),r.on("error",()=>{t.innerHTML=a.translate("home.video.statu_error","视频播放错误"),setTimeout(()=>{s.style.top="0",n.style.bottom="0",t.style.bottom="-100px",l.style.display="block",o.style.display="none",r.dispose(),r=void 0,e.insertAdjacentElement("afterbegin",document.createElement("video"))},2e3)}),r.on("ended",()=>{s.style.top="0",n.style.bottom="0",t.style.bottom="-100px",l.style.display="block",o.style.display="none",r.dispose(),r=void 0,e.insertAdjacentElement("afterbegin",document.createElement("video"))})}).catch(d=>{console.error(d),t.innerHTML=a.translate("home.video.statu_error","视频加载失败"),t.style.bottom="0",setTimeout(()=>{t.style.bottom="-100px"},2e3)})}),o==null||o.addEventListener("click",()=>{r&&r.pause()})}}u([c()],m.prototype,"registerArrowDown",1);u([c()],m.prototype,"registerBackgroundChangeEvent",1);u([c()],m.prototype,"registerBackgroundVideo",1);
